# ä»€ä¹ˆæ˜¯uni-appï¼Ÿ

`Uniapp` æ˜¯ä¸€ä¸ªä½¿ç”¨ `Vue.js` ä½œä¸ºå¼€å‘è¯­è¨€çš„è·¨å¹³å°åº”ç”¨ç¨‹åºå¼€å‘æ¡†æ¶ã€‚å®ƒçš„ä¸»è¦ç‰¹ç‚¹æ˜¯å¯ä»¥è®©å¼€å‘è€…ç¼–å†™ä¸€å¥—ä»£ç ï¼Œç„¶ååœ¨å¤šä¸ªå¹³å°ä¸Šå‘å¸ƒï¼Œæ”¯æŒçš„å¹³å°åŒ…æ‹¬ä½†ä¸é™äº
`Android`ã€`iOS`ã€`Web`ã€ä»¥åŠå„ç§å°ç¨‹åºï¼ˆå¦‚å¾®ä¿¡å°ç¨‹åºã€æ”¯ä»˜å®å°ç¨‹åºç­‰ï¼‰

`Uniapp` **çš„ä¼˜åŠ¿åŒ…æ‹¬ï¼š**

1. ç»Ÿä¸€çš„å¼€å‘ä½“éªŒï¼šç”±äºåŸºäº `Vue.js`ï¼Œå¼€å‘è€…å¯ä»¥äº«å—åˆ°ä¸€è‡´çš„å¼€å‘ä½“éªŒï¼Œæ— éœ€ä¸ºä¸åŒå¹³å°å­¦ä¹ å¤šç§ç¼–ç¨‹è¯­è¨€ã€‚
2. ä»£ç å¤ç”¨ï¼šå¼€å‘è€…åªéœ€è¦ç»´æŠ¤ä¸€å¥—ä»£ç ï¼Œå°±å¯ä»¥åœ¨å¤šä¸ªå¹³å°ä¸Šè¿è¡Œï¼Œå‡å°‘äº†å¼€å‘æ—¶é—´å’Œæˆæœ¬ã€‚
3. å¹¿æ³›çš„å¹³å°æ”¯æŒï¼šé™¤äº†ç§»åŠ¨æ“ä½œç³»ç»Ÿå¤–ï¼Œ`Uniapp` è¿˜æ”¯æŒå°ç¨‹åºç”Ÿæ€ï¼Œä½¿å¾—å¼€å‘çš„åº”ç”¨èƒ½å¤Ÿè¦†ç›–æ›´å¤šçš„ç”¨æˆ·ç¾¤ä½“ã€‚
4. ä¸°å¯Œçš„ç»„ä»¶åº“ï¼šæä¾›äº†å¤§é‡çš„ UI ç»„ä»¶ï¼Œæ–¹ä¾¿å¼€å‘è€…å¿«é€Ÿæ„å»ºç•Œé¢ã€‚
5. æ’ä»¶æ‰©å±•æ€§ï¼šæ”¯æŒæ’ä»¶æœºåˆ¶ï¼Œå¯ä»¥æ–¹ä¾¿åœ°é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡æˆ–è€…åŠŸèƒ½æ¨¡å—ã€‚
6. è‡ªåŠ¨ç”Ÿæˆå¤šå¹³å°ä»£ç ï¼šèƒ½å¤Ÿæ ¹æ®å¼€å‘è€…çš„è®¾å®šï¼Œè‡ªåŠ¨ç”Ÿæˆé€‚ç”¨äºä¸åŒå¹³å°çš„åº”ç”¨ç¨‹åºä»£ç ã€‚

**åº”ç”¨åœºæ™¯ï¼š**
- ç§»åŠ¨åº”ç”¨å¼€å‘ï¼šå¼€å‘ iOS å’Œ Android åº”ç”¨ç¨‹åºã€‚
- å°ç¨‹åºå¼€å‘ï¼šå¼€å‘å¾®ä¿¡å°ç¨‹åºã€æ”¯ä»˜å®å°ç¨‹åºç­‰ã€‚
- Web åº”ç”¨ï¼šå¼€å‘å“åº”å¼çš„ç½‘é¡µåº”ç”¨ã€‚
- ä¼ä¸šå†…éƒ¨å·¥å…·ï¼šå¿«é€Ÿæ„å»ºä¼ä¸šå†…éƒ¨ä½¿ç”¨çš„å·¥å…·æˆ–ç®¡ç†ç³»ç»Ÿã€‚

## ä¸€ï¼Œä½¿ç”¨`HbuilderX`æ„å»ºç¬¬ä¸€ä¸ªåº”ç”¨

1. ä¸‹è½½å¼€å‘å·¥å…· `HbuilderX`

> `HbuilderX` æ˜¯é€šç”¨çš„çš„å‰ç«¯å¼€å‘å·¥å…·ï¼Œä½†æ˜¯ä¸ºäº†`uni-app` åšäº†ç‰¹åˆ«å¼ºåŒ–ã€‚
>
> ä¸‹è½½æ ‡å‡†ç‰ˆ å¹¶å®‰è£…`uni-app`æ’ä»¶ã€‚

2. åˆ›å»º `uni-app` é¡¹ç›®

> é€‰æ‹© `uni-app` ç±»å‹ï¼Œè¾“å…¥å·¥ç¨‹åï¼Œé€‰æ‹©æ¨¡æ¿ï¼Œç‚¹å‡»åˆ›å»ºï¼Œå³å¯æˆåŠŸåˆ›å»ºã€‚
>
> `uni-app` è‡ªå¸¦çš„æ¨¡æ¿æœ‰ Hello `uni-app`ï¼Œæ˜¯å®˜æ–¹çš„ç»„ä»¶å’Œ`API`ç¤ºä¾‹ã€‚
>
> è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„æ¨¡æ¿æ˜¯ `uni ui` é¡¹ç›®æ¨¡æ¿ï¼Œæ—¥å¸¸å¼€å‘æ¨èä½¿ç”¨è¯¥æ¨¡æ¿ï¼Œå·²å†…ç½®å¤§é‡å¸¸ç”¨ç»„ä»¶ã€‚

3. è¿è¡Œ `uni-app`

> ä¸»è¦åŒ…æ‹¬ï¼šæµè§ˆå™¨è¿è¡Œï¼ŒçœŸæœºè¿è¡Œï¼Œå°ç¨‹åºè¿è¡Œç­‰ã€‚

4. å‘å¸ƒ `uni-app`

> ä¸»è¦åŒ…æ‹¬ï¼šäº‘ç«¯åŸç”Ÿ`APP`ï¼Œç¦»çº¿åŸç”Ÿ `App`, `H5`, å„ç§å°ç¨‹åºã€‚

```
ï¼ˆ1ï¼‰å·¥ç¨‹ç›®å½•ç»“æ„
-componentsã€€uni-appç»„ä»¶ç›®å½•
   -comp-a.vueã€€å¯å¤ç”¨çš„aç»„ä»¶
-hybridã€€å­˜æ”¾æœ¬åœ°ç½‘é¡µçš„ç›®å½•ï¼ˆè‡ªå»ºï¼‰
-platformsã€€å­˜æ”¾å„å¹³å°ä¸“ç”¨é¡µé¢çš„ç›®å½•ï¼ˆè‡ªå»ºï¼‰
-pagesã€€ä¸šåŠ¡é¡µé¢æ–‡ä»¶å­˜æ”¾çš„ç›®å½•
   -indexã€€index.vue 
   -listã€€list.vue
-staticã€€å­˜æ”¾åº”ç”¨å¼•ç”¨é™æ€èµ„æºï¼ˆå¦‚å›¾ç‰‡ã€è§†é¢‘ç­‰ï¼‰çš„ç›®å½•ï¼Œæ³¨æ„ï¼šé™æ€èµ„æºåªèƒ½å­˜æ”¾äºæ­¤
-wxcomponentsã€€å­˜æ”¾å°ç¨‹åºç»„ä»¶çš„ç›®å½•ï¼ˆè‡ªå»ºï¼‰
-commonã€€å…¬å…±èµ„æºï¼ˆè‡ªå»ºï¼‰
-apiã€€è¯·æ±‚å°è£…ï¼ˆè‡ªå»ºï¼‰
-storeã€€çŠ¶æ€ç®¡ç†ï¼ˆè‡ªå»ºï¼‰
-main.jsã€€Vueåˆå§‹åŒ–å…¥å£æ–‡ä»¶
-App.vueã€€åº”ç”¨é…ç½®ï¼Œç”¨æ¥é…ç½®Appå…¨å±€æ ·å¼ä»¥åŠç›‘å¬ åº”ç”¨ç”Ÿå‘½å‘¨æœŸ
-manifest.jsonã€€é…ç½®åº”ç”¨åç§°ã€appidã€logoã€ç‰ˆæœ¬ç­‰æ‰“åŒ…ä¿¡æ¯
-pages.jsonã€€é…ç½®é¡µé¢è·¯ç”±ã€å¯¼èˆªæ¡ã€é€‰é¡¹å¡ç­‰é¡µé¢ç±»ä¿¡æ¯
```

## äºŒï¼ŒåŸºç¡€é¡¹ç›®é…ç½®

1. **åº”ç”¨é…ç½® manifest.json**

> manifest.json æ–‡ä»¶æ˜¯åº”ç”¨çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºæŒ‡å®šåº”ç”¨çš„åç§°ï¼Œå›¾æ ‡ï¼Œæƒé™ç­‰ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œä¸ºVueä¸ºH5 è®¾ç½®è·¨åŸŸæ‹¦æˆªå¤„ç†å™¨ã€‚

2. **ç¼–è¯‘é…ç½® vue.config.js**

> vue.config.js æ˜¯ä¸€ä¸ªå¯é€‰çš„é…ç½®æ–‡ä»¶ï¼Œå¦‚æœé¡¹ç›®çš„æ ¹ç›®å½•ä¸­å­˜åœ¨è¿™ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆå®ƒä¼šè¢«è‡ªåŠ¨åŠ è½½ï¼Œä¸€èˆ¬ç”¨äºé…ç½®webpack ç­‰ç¼–è¯‘é€‰é¡¹ã€‚

3. **å…¨å±€é…ç½® pages.json**

> pages.json æ–‡ä»¶ç”¨æ¥å¯¹ uni-app è¿›è¡Œå…¨å±€é…ç½®ï¼Œå†³å®šé¡µé¢æ–‡ä»¶çš„è·¯å¾„ï¼Œçª—å£æ ·å¼ï¼ŒåŸç”Ÿçš„å¯¼èˆªæ ï¼Œåº•éƒ¨çš„åŸç”Ÿtabbar ç­‰ã€‚å®ƒç±»ä¼¼äºå¾®ä¿¡å°ç¨‹åºä¸­çš„
> app.json çš„é¡µé¢ç®¡ç†éƒ¨åˆ†ã€‚

| globalStyle | Object        | å¦  | è®¾ç½®é»˜è®¤é¡µé¢çš„çª—å£è¡¨ç°  |
|-------------|---------------|----|--------------|
| pages       | Object  Array | æ˜¯  | è®¾ç½®é¡µé¢è·¯å¾„ä»¥åŠçª—å£è¡¨ç° |
| easycom     | Object        | å¦  | ç»„ä»¶è‡ªåŠ¨å¼•å…¥è§„åˆ™     |
| å±æ€§          | ç±»å‹            | å¿…å¡« | æè¿°           |
| tabBar      | Object        | å¦  | è®¾ç½®åº•éƒ¨tabçš„è¡¨ç°   |
| condition   | Object        | å¦  | å¯åŠ¨æ¨¡å¼é…ç½®       |
| subPackages | Object  Array | å¦  | åˆ†åŒ…åŠ è½½é…ç½®       |
| preloadRule | Object        | å¦  | åˆ†åŒ…é¢„ä¸‹è½½è§„åˆ™      |

4. **å…¨å±€æ ·å¼ uni.scss**

> uni.scss æ–‡ä»¶çš„ç”¨é€”æ˜¯ä¸ºäº†æ–¹ä¾¿æ•´ä½“æ§åˆ¶åº”ç”¨çš„é£æ ¼ï¼Œæ¯”å¦‚æŒ‰é’®é¢œè‰²ï¼Œè¾¹æ¡†é£æ ¼ï¼Œuni.scss æ–‡ä»¶é‡Œé¢é¢„ç½®äº†ä¸€æ‰¹scsså˜é‡é¢„ç½®ã€‚
>
> `uni-app` å®˜æ–¹æ‰©å±•æ’ä»¶ï¼ˆuni uiï¼‰åŠ [æ’ä»¶å¸‚åœº](https://ext.dcloud.net.cn/) ä¸Šå¾ˆå¤šä¸‰æ–¹æ’ä»¶å‡ä½¿ç”¨äº†è¿™äº›æ ·å¼å˜é‡ï¼Œå¦‚æœä½ æ˜¯æ’ä»¶å¼€å‘è€…ï¼Œå»ºè®®ä½ ä½¿ç”¨
> scss é¢„å¤„ç†ï¼Œå¹¶åœ¨æ’ä»¶ä»£ç ä¸­ç›´æ¥ä½¿ç”¨è¿™äº›å˜é‡ï¼ˆæ— éœ€ import è¿™ä¸ªæ–‡ä»¶ï¼‰ï¼Œæ–¹ä¾¿ç”¨æˆ·é€šè¿‡æ­ç§¯æœ¨çš„æ–¹å¼å¼€å‘æ•´ä½“é£æ ¼ä¸€è‡´çš„Appã€‚
>
> `uni.scss`æ˜¯ä¸€ä¸ªç‰¹æ®Šæ–‡ä»¶ï¼Œåœ¨ä»£ç ä¸­æ— éœ€ import
>
è¿™ä¸ªæ–‡ä»¶å³å¯åœ¨scssä»£ç ä¸­ä½¿ç”¨è¿™é‡Œçš„æ ·å¼å˜é‡ã€‚uni-appçš„ç¼–è¯‘å™¨åœ¨webpacké…ç½®ä¸­ç‰¹æ®Šå¤„ç†äº†è¿™ä¸ªuni.scssï¼Œä½¿å¾—æ¯ä¸ªscssæ–‡ä»¶éƒ½è¢«æ³¨å…¥è¿™ä¸ªuni.scssï¼Œè¾¾åˆ°å…¨å±€å¯ç”¨çš„æ•ˆæœã€‚å¦‚æœå¼€å‘è€…æƒ³è¦lessã€stylusçš„å…¨å±€ä½¿ç”¨ï¼Œéœ€è¦åœ¨vue.config.jsä¸­è‡ªè¡Œé…ç½®webpackç­–ç•¥ã€‚

**æ³¨æ„ï¼š**

1. å¦‚è¦ä½¿ç”¨è¿™äº›å¸¸ç”¨å˜é‡ï¼Œéœ€è¦åœ¨ HBuilderX é‡Œé¢å®‰è£… scss æ’ä»¶ï¼›
2. ä½¿ç”¨æ—¶éœ€è¦åœ¨ style èŠ‚ç‚¹ä¸ŠåŠ ä¸Š `lang="scss"`ã€‚

```html

<style lang="scss">
</style>
```

3. pages.jsonä¸æ”¯æŒscssï¼ŒåŸç”Ÿå¯¼èˆªæ å’Œtabbarçš„åŠ¨æ€ä¿®æ”¹åªèƒ½ä½¿ç”¨js api

**ä»¥ä¸‹æ˜¯ uni.scss çš„ç›¸å…³å˜é‡ï¼š**

```css
/* é¢œè‰²å˜é‡ */

/* è¡Œä¸ºç›¸å…³é¢œè‰² */
$
uni-color-primary: #007aff

;
$
uni-color-success: #4cd964

;
$
uni-color-warning: #f0ad4e

;
$
uni-color-error: #dd524d

;

/* æ–‡å­—åŸºæœ¬é¢œè‰² */
$
uni-text-color:#333

;
/
/
åŸºæœ¬è‰²
$ uni-text-color-inverse:#fff

;
/
/
åè‰²
$ uni-text-color-grey:#999

;
/
/
è¾…åŠ©ç°è‰²ï¼Œå¦‚åŠ è½½æ›´å¤šçš„æç¤ºä¿¡æ¯
$ uni-text-color-placeholder: #808080

;
$
uni-text-color-disable:#c0c0c0

;

/* èƒŒæ™¯é¢œè‰² */
$
uni-bg-color:#ffffff

;
$
uni-bg-color-grey:#f8f8f8

;
$
uni-bg-color-hover:#f1f1f1

;
/
/
ç‚¹å‡»çŠ¶æ€é¢œè‰²
$ uni-bg-color-mask:rgba(0, 0, 0, 0.4)

;
/
/
é®ç½©é¢œè‰²

/* è¾¹æ¡†é¢œè‰² */
$ uni-border-color:#c8c7cc

;

/* å°ºå¯¸å˜é‡ */

/* æ–‡å­—å°ºå¯¸ */
$
uni-font-size-sm:

24
rpx

;
$
uni-font-size-base:

28
rpx

;
$
uni-font-size-lg:

32
rpx

;

/* å›¾ç‰‡å°ºå¯¸ */
$
uni-img-size-sm:

40
rpx

;
$
uni-img-size-base:

52
rpx

;
$
uni-img-size-lg:

80
rpx

;

/* Border Radius */
$
uni-border-radius-sm:

4
rpx

;
$
uni-border-radius-base:

6
rpx

;
$
uni-border-radius-lg:

12
rpx

;
$
uni-border-radius-circle:

50
%
;

/* æ°´å¹³é—´è· */
$
uni-spacing-row-sm:

10
px

;
$
uni-spacing-row-base:

20
rpx

;
$
uni-spacing-row-lg:

30
rpx

;

/* å‚ç›´é—´è· */
$
uni-spacing-col-sm:

8
rpx

;
$
uni-spacing-col-base:

16
rpx

;
$
uni-spacing-col-lg:

24
rpx

;

/* é€æ˜åº¦ */
$
uni-opacity-disabled:

0.3
;
/
/
ç»„ä»¶ç¦ç”¨æ€çš„é€æ˜åº¦

/* æ–‡ç« åœºæ™¯ç›¸å…³ */
$ uni-color-title: #2C405A

;
/
/
æ–‡ç« æ ‡é¢˜é¢œè‰²
$ uni-font-size-title:

40
rpx

;
$
uni-color-subtitle: #555555

;
/
/
äºŒçº§æ ‡é¢˜é¢œè‰²
$ uni-font-size-subtitle:

36
rpx

;
$
uni-color-paragraph: #3F536E

;
/
/
æ–‡ç« æ®µè½é¢œè‰²
$ uni-font-size-paragraph:

30
rpx

;
```

5. **ä¸»ç»„ä»¶ App.vue**

> `App.vue/uvue`æ˜¯uni-appçš„ä¸»ç»„ä»¶ã€‚uni-app jså¼•æ“ç‰ˆæ˜¯app.vueã€‚uni-app xæ˜¯app.uvueã€‚ä»¥ä¸‹å‡ºç°çš„`app.vue`ä¸€èˆ¬æ³›æŒ‡åŒ…å«äº†`
> app.uvue
>
> æ‰€æœ‰é¡µé¢éƒ½æ˜¯åœ¨`App.vue`ä¸‹è¿›è¡Œåˆ‡æ¢çš„ï¼Œæ˜¯åº”ç”¨å…¥å£æ–‡ä»¶ã€‚ä½†`App.vue`æœ¬èº«ä¸æ˜¯é¡µé¢ï¼Œè¿™é‡Œä¸èƒ½ç¼–å†™è§†å›¾å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰
`<template>`ã€‚
>
> è¿™ä¸ªæ–‡ä»¶çš„ä½œç”¨åŒ…æ‹¬ï¼šç›‘å¬åº”ç”¨ç”Ÿå‘½å‘¨æœŸã€é…ç½®å…¨å±€æ ·å¼ã€é…ç½®å…¨å±€çš„å­˜å‚¨globalData
>
> åº”ç”¨ç”Ÿå‘½å‘¨æœŸä»…å¯åœ¨`App.vue`ä¸­ç›‘å¬ï¼Œåœ¨é¡µé¢ç›‘å¬æ— æ•ˆã€‚

6. **å…¥å£æ–‡ä»¶ main.js**

> `main.js/uts`æ˜¯ uni-app çš„å…¥å£æ–‡ä»¶ã€‚uni-app jså¼•æ“ç‰ˆæ˜¯`main.js`ï¼Œè€Œuni-app xåˆ™æ˜¯`main.uts`ã€‚ä»¥ä¸‹ä¸€èˆ¬ç”¨`main.js`æ³›æŒ‡å…¨éƒ¨ã€‚
>
> `main.js`ä¸»è¦ä½œç”¨æ˜¯åˆå§‹åŒ–`vue`å®ä¾‹ã€å®šä¹‰å…¨å±€ç»„ä»¶ã€ä½¿ç”¨éœ€è¦çš„æ’ä»¶å¦‚ i18nã€vuexã€‚
>
> é¦–å…ˆå¼•å…¥äº†`Vue`åº“å’Œ`App.vue`ï¼Œåˆ›å»ºäº†ä¸€ä¸ª`vue`å®ä¾‹ï¼Œå¹¶ä¸”æŒ‚è½½`vue`å®ä¾‹ã€‚

```js
// uni-app vue2
import Vue from 'vue'
import App from './App'
import PageHead from './components/page-head.vue' //å…¨å±€å¼•ç”¨ page-head ç»„ä»¶

Vue.config.productionTip = false
Vue.component('page-head', PageHead) //å…¨å±€æ³¨å†Œ page-head ç»„ä»¶ï¼Œæ¯ä¸ªé¡µé¢å°†å¯ä»¥ç›´æ¥ä½¿ç”¨è¯¥ç»„ä»¶
App.mpType = 'app'

const app = new Vue({
    ...App
})
app.$mount() //æŒ‚è½½ Vue å®ä¾‹
```

```js
// uni-app vue3
import App from './App'
import {createSSRApp} from 'vue'
import PageHead from './components/page-head.vue' //å…¨å±€å¼•ç”¨ page-head ç»„ä»¶

export function createApp() {
    const app = createSSRApp(App)
    app.component('page-head', PageHead) //å…¨å±€æ³¨å†Œ page-head ç»„ä»¶ï¼Œæ¯ä¸ªé¡µé¢å°†å¯ä»¥ç›´æ¥ä½¿ç”¨è¯¥ç»„ä»¶

    return {
        app
    }
}
```

```js
// uni-app (main.uts)
import App from './App'
import {createSSRApp} from 'vue'
import PageHead from './components/page-head.vue' //å…¨å±€å¼•ç”¨ page-head ç»„ä»¶

export function createApp() {
    const app = createSSRApp(App)
    app.component('page-head', PageHead) //å…¨å±€æ³¨å†Œ page-head ç»„ä»¶ï¼Œæ¯ä¸ªé¡µé¢å°†å¯ä»¥ç›´æ¥ä½¿ç”¨è¯¥ç»„ä»¶

    return {
        app
    }
}
```

ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½¿ç”¨easycomæ¯”å…¨å±€ç»„ä»¶æ›´å¸¸ç”¨ï¼ŒeasycomæŒ‰éœ€åº”ç”¨æ›´èŠ‚çœèµ„æºã€‚

**ä»£ç æ—¶åº**

> å¼€å‘è€…å†™çš„ä»£ç ï¼Œåœ¨åº”ç”¨å¯åŠ¨æ—¶ï¼ŒæŒ‰å¦‚ä¸‹æ—¶åºåŠ è½½ï¼š
>
> 1. main.js/uts çš„ `export function createApp() {}` å¤–çš„ä»£ç ã€ä»»ä½•é¡µé¢/ç»„ä»¶çš„scriptä¸­`export default {}`å¤–çš„ä»£ç 
> 2. main.js/uts çš„ `export function createApp() {}` ä¸­çš„ä»£ç 
> 3. app.vue/uvueä¸­onLaunchçš„ä»£ç 
> 4. é¦–é¡µçš„onLoad
> 5. é¦–é¡µçš„onReady
>
> å¼€å‘è€…éœ€è°¨æ…åœ¨main.js/utsã€é¡µé¢/ç»„ä»¶scriptä¸­`export default {}`å¤–ã€å’ŒonLaunchä¸­ç¼–å†™ä»£ç ï¼š
>
> 1. è¿™äº›çš„ä»£ç éƒ½ä¼šå½±å“å¯åŠ¨é€Ÿåº¦ï¼ˆå®šä¹‰typeä¸ä¼šï¼Œtypeæ˜¯ä½¿ç”¨æ—¶æ‰åŠ è½½ï¼‰
>
> 2. æ‰§è¡Œå¤ªæ—©ï¼Œå¾ˆå¤šåŠŸèƒ½å’ŒAPIæ— æ³•ä½¿ç”¨ï¼Œéœ€trycatchã€‚å°¤å…¶æ˜¯ä¸ç•Œé¢ç›¸å…³çš„éƒ½æ— æ³•ä½¿ç”¨ï¼Œæ­¤æ—¶é¦–é¡µéƒ½è¿˜æ²¡æœ‰åˆ›å»ºã€‚
>
> 3. main.js/utsã€é¡µé¢scriptä¸­`export default {}`å¤–çš„ä»£ç ï¼Œå…¶åˆ›å»ºçš„å˜é‡åœ¨åº”ç”¨å­˜æ´»æ—¶ä¸€ç›´å æ®ç€å†…å­˜ï¼Œä¸ä¼šè·Ÿéšé¡µé¢å…³é—­è€Œå›æ”¶
     >
     >    **æ’ä»¶**

> ä½¿ç”¨`Vue.use`å¼•ç”¨æ’ä»¶ï¼Œä½¿ç”¨`Vue.prototype`æ·»åŠ å…¨å±€å˜é‡ï¼Œä½¿ç”¨`Vue.component`æ³¨å†Œå…¨å±€ç»„ä»¶ã€‚
>
> å¯ä»¥å¼•ç”¨`vuex`ï¼Œå› æ¶‰åŠå¤šä¸ªæ–‡ä»¶ï¼Œæ­¤å¤„æ²¡æœ‰æä¾›ç¤ºä¾‹ï¼Œè¯¦è§`hello uni-app`ç¤ºä¾‹å·¥ç¨‹ã€‚
>
> æ— æ³•ä½¿ç”¨`vue-router`ï¼Œè·¯ç”±é¡»åœ¨`pages.json`ä¸­è¿›è¡Œé…ç½®ã€‚å¦‚æœå¼€å‘è€…åšæŒä½¿ç”¨`vue-router`
> ï¼Œå¯ä»¥åœ¨[æ’ä»¶å¸‚åœº](https://ext.dcloud.net.cn/search?q=vue-router)æ‰¾åˆ°è½¬æ¢æ’ä»¶ã€‚

**æ³¨æ„**

- nvue æš‚ä¸æ”¯æŒåœ¨ main.js æ³¨å†Œå…¨å±€ç»„ä»¶
- uni-app x æš‚ä¸æ”¯æŒ i18nã€vuexã€piniaç­‰æ’ä»¶

## ä¸‰ï¼ŒUniapp ç”Ÿå‘½å‘¨æœŸ

### åº”ç”¨ç”Ÿå‘½å‘¨æœŸ

`uni-app` æ”¯æŒå¦‚ä¸‹åº”ç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š

| å‡½æ•°å                  | è¯´æ˜                                                                                                                                                        | å¹³å°å…¼å®¹                  |
|:---------------------|:----------------------------------------------------------------------------------------------------------------------------------------------------------|:----------------------|
| onLaunch             | å½“`uni-app` åˆå§‹åŒ–å®Œæˆæ—¶è§¦å‘ï¼ˆå…¨å±€åªè§¦å‘ä¸€æ¬¡ï¼‰ï¼Œå‚æ•°ä¸ºåº”ç”¨å¯åŠ¨å‚æ•°ï¼ŒåŒ [uni.getLaunchOptionsSync](https://uniapp.dcloud.net.cn/api/getLaunchOptionsSync.html#getlaunchoptionssync) çš„è¿”å›å€¼ |                       |
| onShow               | å½“ `uni-app` å¯åŠ¨ï¼Œæˆ–ä»åå°è¿›å…¥å‰å°æ˜¾ç¤ºï¼Œå‚æ•°ä¸ºåº”ç”¨å¯åŠ¨å‚æ•°ï¼ŒåŒ [uni.getLaunchOptionsSync](https://uniapp.dcloud.net.cn/api/getLaunchOptionsSync.html#getlaunchoptionssync) çš„è¿”å›å€¼    |                       |
| onHide               | å½“ `uni-app` ä»å‰å°è¿›å…¥åå°                                                                                                                                       |                       |
| onError              | å½“ `uni-app` æŠ¥é”™æ—¶è§¦å‘                                                                                                                                         | app-uvue ä¸æ”¯æŒ          |
| onUniNViewMessage    | å¯¹ `nvue` é¡µé¢å‘é€çš„æ•°æ®è¿›è¡Œç›‘å¬ï¼Œå¯å‚è€ƒ [nvue å‘ vue é€šè®¯](https://uniapp.dcloud.io/tutorial/nvue-api?id=communication)                                                     | app-uvue ä¸æ”¯æŒ          |
| onUnhandledRejection | å¯¹æœªå¤„ç†çš„ Promise æ‹’ç»äº‹ä»¶ç›‘å¬å‡½æ•°ï¼ˆ2.8.1+ app-uvue æš‚ä¸æ”¯æŒï¼‰                                                                                                              | app-uvue ä¸æ”¯æŒ          |
| onPageNotFound       | é¡µé¢ä¸å­˜åœ¨ç›‘å¬å‡½æ•°                                                                                                                                                 | app-uvue ä¸æ”¯æŒ          |
| onThemeChange        | ç›‘å¬ç³»ç»Ÿä¸»é¢˜å˜åŒ–                                                                                                                                                  | app-uvue ä¸æ”¯æŒ          |
| onLastPageBackPress  | æœ€åä¸€ä¸ªé¡µé¢æŒ‰ä¸‹Android backé”®ï¼Œå¸¸ç”¨äºè‡ªå®šä¹‰é€€å‡º                                                                                                                            | app-uvue-android 3.9+ |
| onExit               | ç›‘å¬åº”ç”¨é€€å‡º                                                                                                                                                    | app-uvue-android 3.9+ |

**ç¤ºä¾‹ä»£ç **

```html

<script>
    // åªèƒ½åœ¨App.vueé‡Œç›‘å¬åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸ
    export default {
        onLaunch: function (options) {
            console.log('App Launch')
            console.log('åº”ç”¨å¯åŠ¨è·¯å¾„ï¼š', options.path)
        },
        onShow: function (options) {
            console.log('App Show')
            console.log('åº”ç”¨å¯åŠ¨è·¯å¾„ï¼š', options.path)
        },
        onHide: function () {
            console.log('App Hide')
        }
    }
</script>
```

**æ³¨æ„**

- **åº”ç”¨ç”Ÿå‘½å‘¨æœŸä»…å¯åœ¨`App.vue`ä¸­ç›‘å¬ï¼Œåœ¨å…¶å®ƒé¡µé¢ç›‘å¬æ— æ•ˆ**ã€‚
- ä»¥ç»„åˆå¼ API ä½¿ç”¨æ—¶ï¼Œåœ¨ Vue2 å’Œ Vue3
  ä¸­å­˜åœ¨ä¸€å®šåŒºåˆ«ï¼Œè¯·åˆ†åˆ«å‚è€ƒï¼š[Vue2 ç»„åˆå¼ API ä½¿ç”¨æ–‡æ¡£](https://zh.uniapp.dcloud.io/tutorial/vue-composition-api.html)
  å’Œ [Vue3 ç»„åˆå¼ API ä½¿ç”¨æ–‡æ¡£](https://zh.uniapp.dcloud.io/tutorial/vue3-composition-api.html)ã€‚
- åº”ç”¨å¯åŠ¨å‚æ•°ï¼Œå¯ä»¥åœ¨API `uni.getLaunchOptionsSync`
  è·å–ï¼Œ[è¯¦è§](https://uniapp.dcloud.net.cn/api/getLaunchOptionsSync.html#getlaunchoptionssync)
- onlaunché‡Œè¿›è¡Œé¡µé¢è·³è½¬ï¼Œå¦‚é‡ç™½å±æŠ¥é”™ï¼Œè¯·å‚è€ƒhttps://ask.dcloud.net.cn/article/35942
- `App.vue` ä¸èƒ½å†™æ¨¡æ¿
- onPageNotFound é¡µé¢å®é™…ä¸Šå·²ç»æ‰“å¼€äº†ï¼ˆæ¯”å¦‚é€šè¿‡åˆ†äº«å¡ç‰‡ã€å°ç¨‹åºç ï¼‰ä¸”å‘ç°é¡µé¢ä¸å­˜åœ¨ï¼Œæ‰ä¼šè§¦å‘ï¼Œapi è·³è½¬ä¸å­˜åœ¨çš„é¡µé¢ä¸ä¼šè§¦å‘ï¼ˆå¦‚
  uni.navigateToï¼‰

### é¡µé¢ç”Ÿå‘½å‘¨æœŸ

| å‡½æ•°å                                 | è¯´æ˜                                                                                                                                                                                          | å¹³å°å·®å¼‚è¯´æ˜                                      | æœ€ä½ç‰ˆæœ¬   |
|:------------------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:--------------------------------------------|:-------|
| onInit                              | ç›‘å¬é¡µé¢åˆå§‹åŒ–ï¼Œå…¶å‚æ•°åŒ onLoad å‚æ•°ï¼Œä¸ºä¸Šä¸ªé¡µé¢ä¼ é€’çš„æ•°æ®ï¼Œå‚æ•°ç±»å‹ä¸º Objectï¼ˆç”¨äºé¡µé¢ä¼ å‚ï¼‰ï¼Œè§¦å‘æ—¶æœºæ—©äº onLoad                                                                                                                        | ç™¾åº¦å°ç¨‹åº                                       | 3.1.0+ |
| onLoad                              | ç›‘å¬é¡µé¢åŠ è½½ï¼Œè¯¥é’©å­è¢«è°ƒç”¨æ—¶ï¼Œå“åº”å¼æ•°æ®ã€è®¡ç®—å±æ€§ã€æ–¹æ³•ã€ä¾¦å¬å™¨ã€propsã€slots å·²è®¾ç½®å®Œæˆï¼Œå…¶å‚æ•°ä¸ºä¸Šä¸ªé¡µé¢ä¼ é€’çš„æ•°æ®ï¼Œå‚æ•°ç±»å‹ä¸º Objectï¼ˆç”¨äºé¡µé¢ä¼ å‚ï¼‰ï¼Œå‚è€ƒ[ç¤ºä¾‹](https://zh.uniapp.dcloud.io/api/router#navigateto)ã€‚                                            |                                             |        |
| onShow                              | ç›‘å¬é¡µé¢æ˜¾ç¤ºï¼Œé¡µé¢æ¯æ¬¡å‡ºç°åœ¨å±å¹•ä¸Šéƒ½è§¦å‘ï¼ŒåŒ…æ‹¬ä»ä¸‹çº§é¡µé¢ç‚¹è¿”å›éœ²å‡ºå½“å‰é¡µé¢                                                                                                                                                       |                                             |        |
| onReady                             | ç›‘å¬é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆï¼Œæ­¤æ—¶ç»„ä»¶å·²æŒ‚è½½å®Œæˆï¼ŒDOM æ ‘($el)å·²å¯ç”¨ï¼Œæ³¨æ„å¦‚æœæ¸²æŸ“é€Ÿåº¦å¿«ï¼Œä¼šåœ¨é¡µé¢è¿›å…¥åŠ¨ç”»å®Œæˆå‰è§¦å‘                                                                                                                                  |                                             |        |
| onHide                              | ç›‘å¬é¡µé¢éšè—                                                                                                                                                                                      |                                             |        |
| onUnload                            | ç›‘å¬é¡µé¢å¸è½½                                                                                                                                                                                      |                                             |        |
| onResize                            | ç›‘å¬çª—å£å°ºå¯¸å˜åŒ–                                                                                                                                                                                    | Appã€å¾®ä¿¡å°ç¨‹åºã€å¿«æ‰‹å°ç¨‹åº                             |        |
| onPullDownRefresh                   | ç›‘å¬ç”¨æˆ·ä¸‹æ‹‰åŠ¨ä½œï¼Œä¸€èˆ¬ç”¨äºä¸‹æ‹‰åˆ·æ–°ï¼Œå‚è€ƒ[ç¤ºä¾‹](https://zh.uniapp.dcloud.io/api/ui/pulldown.html)                                                                                                                  |                                             |        |
| onReachBottom                       | é¡µé¢æ»šåŠ¨åˆ°åº•éƒ¨çš„äº‹ä»¶ï¼ˆä¸æ˜¯scroll-viewæ»šåˆ°åº•ï¼‰ï¼Œå¸¸ç”¨äºä¸‹æ‹‰ä¸‹ä¸€é¡µæ•°æ®ã€‚å…·ä½“è§ä¸‹æ–¹æ³¨æ„äº‹é¡¹                                                                                                                                           |                                             |        |
| onTabItemTap                        | ç‚¹å‡» tab æ—¶è§¦å‘ï¼Œå‚æ•°ä¸ºObjectï¼Œå…·ä½“è§ä¸‹æ–¹æ³¨æ„äº‹é¡¹                                                                                                                                                              | å¾®ä¿¡å°ç¨‹åºã€QQå°ç¨‹åºã€æ”¯ä»˜å®å°ç¨‹åºã€ç™¾åº¦å°ç¨‹åºã€H5ã€Appã€å¿«æ‰‹å°ç¨‹åºã€äº¬ä¸œå°ç¨‹åº |        |
| onShareAppMessage                   | ç”¨æˆ·ç‚¹å‡»å³ä¸Šè§’åˆ†äº«                                                                                                                                                                                   | å¾®ä¿¡å°ç¨‹åºã€QQå°ç¨‹åºã€æ”¯ä»˜å®å°ç¨‹åºã€æŠ–éŸ³å°ç¨‹åºã€é£ä¹¦å°ç¨‹åºã€å¿«æ‰‹å°ç¨‹åºã€äº¬ä¸œå°ç¨‹åº  |        |
| onPageScroll                        | ç›‘å¬é¡µé¢æ»šåŠ¨ï¼Œå‚æ•°ä¸ºObject                                                                                                                                                                            | nvueä¸æ”¯æŒ                                     |        |
| onNavigationBarButtonTap            | ç›‘å¬åŸç”Ÿæ ‡é¢˜æ æŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼Œå‚æ•°ä¸ºObject                                                                                                                                                                     | Appã€H5                                      |        |
| onBackPress                         | ç›‘å¬é¡µé¢è¿”å›ï¼Œè¿”å› event = {from:backbuttonã€ navigateBack} ï¼Œbackbutton è¡¨ç¤ºæ¥æºæ˜¯å·¦ä¸Šè§’è¿”å›æŒ‰é’®æˆ– android è¿”å›é”®ï¼›navigateBackè¡¨ç¤ºæ¥æºæ˜¯ uni.navigateBackï¼›[è¯¦è§](https://zh.uniapp.dcloud.io/tutorial/page.html#onbackpress) | appã€H5ã€æ”¯ä»˜å®å°ç¨‹åº                               |        |
| onNavigationBarSearchInputChanged   | ç›‘å¬åŸç”Ÿæ ‡é¢˜æ æœç´¢è¾“å…¥æ¡†è¾“å…¥å†…å®¹å˜åŒ–äº‹ä»¶                                                                                                                                                                        | Appã€H5                                      | 1.6.0  |
| onNavigationBarSearchInputConfirmed | ç›‘å¬åŸç”Ÿæ ‡é¢˜æ æœç´¢è¾“å…¥æ¡†æœç´¢äº‹ä»¶ï¼Œç”¨æˆ·ç‚¹å‡»è½¯é”®ç›˜ä¸Šçš„â€œæœç´¢â€æŒ‰é’®æ—¶è§¦å‘ã€‚                                                                                                                                                        | Appã€H5                                      | 1.6.0  |
| onNavigationBarSearchInputClicked   | ç›‘å¬åŸç”Ÿæ ‡é¢˜æ æœç´¢è¾“å…¥æ¡†ç‚¹å‡»äº‹ä»¶ï¼ˆpages.json ä¸­çš„ searchInput é…ç½® disabled ä¸º true æ—¶æ‰ä¼šè§¦å‘ï¼‰                                                                                                                        | Appã€H5                                      | 1.6.0  |
| onShareTimeline                     | ç›‘å¬ç”¨æˆ·ç‚¹å‡»å³ä¸Šè§’è½¬å‘åˆ°æœ‹å‹åœˆ                                                                                                                                                                             | å¾®ä¿¡å°ç¨‹åº                                       | 2.8.1+ |
| onAddToFavorites                    | ç›‘å¬ç”¨æˆ·ç‚¹å‡»å³ä¸Šè§’æ”¶è—                                                                                                                                                                                 | å¾®ä¿¡å°ç¨‹åºã€QQå°ç¨‹åº                                 | 2.8.1+ |

## å››ï¼ŒUniapp è·¯ç”±é…ç½®åŠå…¶é¡µé¢è·³è½¬

### (1)  pages.jsoné‡Œé¢é…ç½®tabBar

> å¦‚æœåº”ç”¨æ˜¯ä¸€ä¸ªå¤š tab åº”ç”¨ï¼Œå¯ä»¥é€šè¿‡ tabBar é…ç½®é¡¹æŒ‡å®šä¸€çº§å¯¼èˆªæ ï¼Œä»¥åŠ tab åˆ‡æ¢æ—¶æ˜¾ç¤ºçš„å¯¹åº”é¡µã€‚
>
> åœ¨ pages.json ä¸­æä¾› tabBar é…ç½®ï¼Œä¸ä»…ä»…æ˜¯ä¸ºäº†æ–¹ä¾¿å¿«é€Ÿå¼€å‘å¯¼èˆªï¼Œæ›´é‡è¦çš„æ˜¯åœ¨Appå’Œå°ç¨‹åºç«¯æå‡æ€§èƒ½ã€‚åœ¨è¿™ä¸¤ä¸ªå¹³å°ï¼Œåº•å±‚åŸç”Ÿå¼•æ“åœ¨å¯åŠ¨æ—¶æ— éœ€ç­‰å¾…jså¼•æ“åˆå§‹åŒ–ï¼Œå³å¯ç›´æ¥è¯»å–
> pages.json ä¸­é…ç½®çš„ tabBar ä¿¡æ¯ï¼Œæ¸²æŸ“åŸç”Ÿtabã€‚

> **Tips**
>
> - å½“è®¾ç½® position ä¸º top æ—¶ï¼Œå°†ä¸ä¼šæ˜¾ç¤º icon
> - tabBar ä¸­çš„ list æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåªèƒ½é…ç½®æœ€å°‘2ä¸ªã€æœ€å¤š5ä¸ª tabï¼Œtab æŒ‰æ•°ç»„çš„é¡ºåºæ’åºã€‚
> - tabbar åˆ‡æ¢ç¬¬ä¸€æ¬¡åŠ è½½æ—¶å¯èƒ½æ¸²æŸ“ä¸åŠæ—¶ï¼Œå¯ä»¥åœ¨æ¯ä¸ªtabbaré¡µé¢çš„onLoadç”Ÿå‘½å‘¨æœŸé‡Œå…ˆå¼¹å‡ºä¸€ä¸ªç­‰å¾…é›ªèŠ±ï¼ˆhello uni-appä½¿ç”¨äº†æ­¤æ–¹å¼ï¼‰
> - tabbar çš„é¡µé¢å±•ç°è¿‡ä¸€æ¬¡åå°±ä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œå†æ¬¡åˆ‡æ¢ tabbar é¡µé¢ï¼Œåªä¼šè§¦å‘æ¯ä¸ªé¡µé¢çš„onShowï¼Œä¸ä¼šå†è§¦å‘onLoadã€‚
> - é¡¶éƒ¨çš„ tabbar ç›®å‰ä»…å¾®ä¿¡å°ç¨‹åºä¸Šæ”¯æŒã€‚éœ€è¦ç”¨åˆ°é¡¶éƒ¨é€‰é¡¹å¡çš„è¯ï¼Œå»ºè®®ä¸ä½¿ç”¨ tabbar çš„é¡¶éƒ¨è®¾ç½®ï¼Œè€Œæ˜¯è‡ªå·±åšé¡¶éƒ¨é€‰é¡¹å¡ï¼Œå¯å‚è€ƒ
    hello uni-app->æ¨¡æ¿->é¡¶éƒ¨é€‰é¡¹å¡ã€‚

```json
// pages.json
{
  "pages": [
    //pagesæ•°ç»„ä¸­ç¬¬ä¸€é¡¹è¡¨ç¤ºåº”ç”¨å¯åŠ¨é¡µï¼Œå‚è€ƒï¼šhttps://uniapp.dcloud.io/collocation/pages
    {
      "path": "pages/index/index",
      "style": {
        "navigationBarTitleText": "é¦–é¡µ",
        // å…è®¸é¡µé¢ä¸‹æ‹‰
        "enablePullDownRefresh": true
      }
    },
    {
      "path": "pages/404/404",
      "style": {
        "navigationBarTitleText": "404",
        "enablePullDownRefresh": false
      }
    },
    {
      "path": "pages/list/list",
      "style": {
        "navigationBarTitleText": "é€šè®¯å½•"
      }
    },
    {
      "path": "pages/me/me",
      "style": {
        "navigationBarTitleText": "æˆ‘çš„"
      }
    },
    {
      "path": "pages/friend/friend",
      "style": {
        "navigationBarTitleText": "å‘ç°"
      }
    }
  ],
  "globalStyle": {
    "navigationBarTextStyle": "black",
    "navigationBarTitleText": "uni-app",
    "navigationBarBackgroundColor": "#F8F8F8",
    "backgroundColor": "#F8F8F8"
  },
  "tabBar": {
    "color": "#7A7E83",
    "selectedColor": "#3cc51f",
    // é€‰ä¸­ä¹‹åæ–‡å­—çš„é¢œè‰²
    "borderStyle": "black",
    "backgroundColor": "#ffffff",
    "list": [
      {
        "pagePath": "pages/index/index",
        "iconPath": "static/wechat.png",
        "selectedIconPath": "static/wechat.png",
        // é€‰ä¸­ä¹‹åçš„å›¾æ ‡ é€‰ä¸­ä¹‹åçš„å›¾æ ‡è·Ÿä¹‹å‰çš„ä¸æ˜¯åŒä¸€ä¸ª
        "text": "å¾®ä¿¡"
      },
      {
        "pagePath": "pages/list/list",
        "iconPath": "static/tongxun.png",
        "selectedIconPath": "static/tongxun.png",
        "text": "é€šè®¯å½•"
      },
      {
        "pagePath": "pages/friend/friend",
        "iconPath": "static/find.png",
        "selectedIconPath": "static/find.png",
        "text": "å‘ç°"
      },
      {
        "pagePath": "pages/me/me",
        "iconPath": "static/me.png",
        "selectedIconPath": "static/me.png",
        "text": "æˆ‘çš„"
      }
    ]
  }
}
```

**å±æ€§è¯´æ˜ï¼š**

| å±æ€§               | ç±»å‹       | å¿…å¡« | é»˜è®¤å€¼    | æè¿°                                                                                                                                                              | å¹³å°å·®å¼‚è¯´æ˜                               |
|:-----------------|:---------|:---|:-------|:----------------------------------------------------------------------------------------------------------------------------------------------------------------|:-------------------------------------|
| color            | HexColor | æ˜¯  |        | tab ä¸Šçš„æ–‡å­—é»˜è®¤é¢œè‰²                                                                                                                                                    |                                      |
| selectedColor    | HexColor | æ˜¯  |        | tab ä¸Šçš„æ–‡å­—é€‰ä¸­æ—¶çš„é¢œè‰²                                                                                                                                                  |                                      |
| backgroundColor  | HexColor | æ˜¯  |        | tab çš„èƒŒæ™¯è‰²                                                                                                                                                        |                                      |
| borderStyle      | String   | å¦  | black  | tabbar ä¸Šè¾¹æ¡†çš„é¢œè‰²ï¼Œå¯é€‰å€¼ black/whiteï¼Œblackå¯¹åº”é¢œè‰²rgba(0,0,0,0.33)ï¼Œwhiteå¯¹åº”é¢œè‰²rgba(255,255,255,0.33)ã€‚                                                                        | App 2.3.4+ ã€H5 3.0.0+                |
| blurEffect       | String   | å¦  | none   | iOS é«˜æ–¯æ¨¡ç³Šæ•ˆæœï¼Œå¯é€‰å€¼ dark/extralight/light/noneï¼ˆå‚è€ƒ:[ä½¿ç”¨è¯´æ˜](https://ask.dcloud.net.cn/article/36617)ï¼‰                                                                   | App 2.4.0+ æ”¯æŒã€H5 3.0.0+ï¼ˆåªæœ‰æœ€æ–°ç‰ˆæµè§ˆå™¨æ‰æ”¯æŒï¼‰ |
| list             | Array    | æ˜¯  |        | tab çš„åˆ—è¡¨ï¼Œè¯¦è§ list å±æ€§è¯´æ˜ï¼Œæœ€å°‘2ä¸ªã€æœ€å¤š5ä¸ª tab                                                                                                                              |                                      |
| position         | String   | å¦  | bottom | å¯é€‰å€¼ bottomã€top                                                                                                                                                  | top å€¼ä»…å¾®ä¿¡å°ç¨‹åºæ”¯æŒ                        |
| fontSize         | String   | å¦  | 10px   | æ–‡å­—é»˜è®¤å¤§å°                                                                                                                                                          | App 2.3.4+ã€H5 3.0.0+                 |
| iconWidth        | String   | å¦  | 24px   | å›¾æ ‡é»˜è®¤å®½åº¦ï¼ˆé«˜åº¦ç­‰æ¯”ä¾‹ç¼©æ”¾ï¼‰                                                                                                                                                 | App 2.3.4+ã€H5 3.0.0+                 |
| spacing          | String   | å¦  | 3px    | å›¾æ ‡å’Œæ–‡å­—çš„é—´è·                                                                                                                                                        | App 2.3.4+ã€H5 3.0.0+                 |
| height           | String   | å¦  | 50px   | tabBar é»˜è®¤é«˜åº¦                                                                                                                                                     | App 2.3.4+ã€H5 3.0.0+                 |
| midButton        | Object   | å¦  |        | ä¸­é—´æŒ‰é’® ä»…åœ¨ list é¡¹ä¸ºå¶æ•°æ—¶æœ‰æ•ˆ                                                                                                                                            | App 2.3.4+ã€H5 3.0.0+                 |
| iconfontSrc      | String   | å¦  |        | listè®¾ç½® iconfont å±æ€§æ—¶ï¼Œéœ€è¦æŒ‡å®šå­—ä½“æ–‡ä»¶è·¯å¾„                                                                                                                                  | App 3.4.4+ã€H5 3.5.3+                 |
| backgroundImage  | String   | å¦  |        | è®¾ç½®èƒŒæ™¯å›¾ç‰‡,ä¼˜å…ˆçº§é«˜äº backgroundColor                                                                                                                                    | App                                  |
| backgroundRepeat | String   | å¦  |        | è®¾ç½®æ ‡é¢˜æ çš„èƒŒæ™¯å›¾å¹³é“ºæ–¹å¼ï¼Œå¯å–å€¼ï¼š"repeat" - èƒŒæ™¯å›¾ç‰‡åœ¨å‚ç›´æ–¹å‘å’Œæ°´å¹³æ–¹å‘å¹³é“ºï¼›"repeat-x" - èƒŒæ™¯å›¾ç‰‡åœ¨æ°´å¹³æ–¹å‘å¹³é“ºï¼Œå‚ç›´æ–¹å‘æ‹‰ä¼¸ï¼›"repeat-y" - èƒŒæ™¯å›¾ç‰‡åœ¨å‚ç›´æ–¹å‘å¹³é“ºï¼Œæ°´å¹³æ–¹å‘æ‹‰ä¼¸ï¼›"no-repeat" - èƒŒæ™¯å›¾ç‰‡åœ¨å‚ç›´æ–¹å‘å’Œæ°´å¹³æ–¹å‘éƒ½æ‹‰ä¼¸ã€‚ é»˜è®¤ä½¿ç”¨ "no-repeat" | App                                  |
| redDotColor      | String   | å¦  |        | tabbarä¸Šçº¢ç‚¹é¢œè‰²                                                                                                                                                     | App                                  |

å…¶ä¸­ list æ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªé¡¹éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶å±æ€§å€¼å¦‚ä¸‹ï¼š

| å±æ€§               | ç±»å‹      | å¿…å¡« | è¯´æ˜                                                                             | å¹³å°å·®å¼‚                       |
|:-----------------|:--------|:---|:-------------------------------------------------------------------------------|:---------------------------|
| pagePath         | String  | æ˜¯  | é¡µé¢è·¯å¾„ï¼Œå¿…é¡»åœ¨ pages ä¸­å…ˆå®šä¹‰                                                            |                            |
| text             | String  | æ˜¯  | tab ä¸ŠæŒ‰é’®æ–‡å­—ï¼Œåœ¨ App å’Œ H5 å¹³å°ä¸ºéå¿…å¡«ã€‚ä¾‹å¦‚ä¸­é—´å¯æ”¾ä¸€ä¸ªæ²¡æœ‰æ–‡å­—çš„+å·å›¾æ ‡                                  |                            |
| iconPath         | String  | å¦  | å›¾ç‰‡è·¯å¾„ï¼Œicon å¤§å°é™åˆ¶ä¸º40kbï¼Œå»ºè®®å°ºå¯¸ä¸º 81px * 81pxï¼Œå½“ position ä¸º top æ—¶ï¼Œæ­¤å‚æ•°æ— æ•ˆï¼Œä¸æ”¯æŒç½‘ç»œå›¾ç‰‡ï¼Œä¸æ”¯æŒå­—ä½“å›¾æ ‡ |                            |
| selectedIconPath | String  | å¦  | é€‰ä¸­æ—¶çš„å›¾ç‰‡è·¯å¾„ï¼Œicon å¤§å°é™åˆ¶ä¸º40kbï¼Œå»ºè®®å°ºå¯¸ä¸º 81px * 81px ï¼Œå½“ position ä¸º top æ—¶ï¼Œæ­¤å‚æ•°æ— æ•ˆ            |                            |
| visible          | Boolean | å¦  | è¯¥é¡¹æ˜¯å¦æ˜¾ç¤ºï¼Œé»˜è®¤æ˜¾ç¤º                                                                    | App (3.2.10+)ã€H5 (3.2.10+) |
| iconfont         | Object  | å¦  | å­—ä½“å›¾æ ‡ï¼Œä¼˜å…ˆçº§é«˜äº iconPath                                                            | Appï¼ˆ3.4.4+ï¼‰ã€H5 (3.5.3+)    |

### (2) è·¯ç”±è·³è½¬

> `uni-app` æœ‰ä¸¤ç§é¡µé¢è·¯ç”±è·³è½¬æ–¹å¼ï¼šä½¿ç”¨[navigator](https://zh.uniapp.dcloud.io/component/navigator)
> ç»„ä»¶è·³è½¬ã€è°ƒç”¨[API](https://zh.uniapp.dcloud.io/api/router)è·³è½¬ã€‚

#### é¡µé¢æ ˆ

æ¡†æ¶ä»¥æ ˆçš„å½¢å¼ç®¡ç†å½“å‰æ‰€æœ‰é¡µé¢ï¼Œ å½“å‘ç”Ÿè·¯ç”±åˆ‡æ¢çš„æ—¶å€™ï¼Œé¡µé¢æ ˆçš„è¡¨ç°å¦‚ä¸‹ï¼š

| è·¯ç”±æ–¹å¼   | é¡µé¢æ ˆè¡¨ç°               | è§¦å‘æ—¶æœº                                                                                                                                                    |
|--------|:--------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------|
| åˆå§‹åŒ–    | æ–°é¡µé¢å…¥æ ˆ               | uni-app æ‰“å¼€çš„ç¬¬ä¸€ä¸ªé¡µé¢                                                                                                                                        |
| æ‰“å¼€æ–°é¡µé¢  | æ–°é¡µé¢å…¥æ ˆ               | è°ƒç”¨ API  [uni.navigateTo](https://zh.uniapp.dcloud.io/api/router#navigateto) ã€ä½¿ç”¨ç»„ä»¶  <navigator open-type="navigate"/>                                    |
| é¡µé¢é‡å®šå‘  | å½“å‰é¡µé¢å‡ºæ ˆï¼Œæ–°é¡µé¢å…¥æ ˆ        | è°ƒç”¨ API  [uni.redirectTo](https://zh.uniapp.dcloud.io/api/router#redirectto) ã€ä½¿ç”¨ç»„ä»¶ <navigator open-type="redirectTo"/>                                   |
| é¡µé¢è¿”å›   | é¡µé¢ä¸æ–­å‡ºæ ˆï¼Œç›´åˆ°ç›®æ ‡è¿”å›é¡µ      | è°ƒç”¨ API  [uni.navigateBack](https://zh.uniapp.dcloud.io/api/router#navigateback)  ã€ä½¿ç”¨ç»„ä»¶ <navigator open-type="navigateBack"/> ã€ç”¨æˆ·æŒ‰å·¦ä¸Šè§’è¿”å›æŒ‰é’®ã€å®‰å“ç”¨æˆ·ç‚¹å‡»ç‰©ç†backæŒ‰é”® |
| Tab åˆ‡æ¢ | é¡µé¢å…¨éƒ¨å‡ºæ ˆï¼Œåªç•™ä¸‹æ–°çš„ Tab é¡µé¢ | è°ƒç”¨ API  [uni.switchTab](https://zh.uniapp.dcloud.io/api/router#switchtab) ã€ä½¿ç”¨ç»„ä»¶ <navigator open-type="switchTab"/> ã€ç”¨æˆ·åˆ‡æ¢ Tab                            |
| é‡åŠ è½½    | é¡µé¢å…¨éƒ¨å‡ºæ ˆï¼Œåªç•™ä¸‹æ–°çš„é¡µé¢      | è°ƒç”¨ API  [uni.reLaunch](https://zh.uniapp.dcloud.io/api/router#relaunch) ã€ä½¿ç”¨ç»„ä»¶  <navigator open-type="reLaunch"/>                                        |

### (3)  è·å–å½“å‰é¡µé¢æ ˆ

> `getCurrentPages()` å‡½æ•°ç”¨äºè·å–å½“å‰é¡µé¢æ ˆçš„å®ä¾‹ï¼Œä»¥æ•°ç»„å½¢å¼æŒ‰æ ˆçš„é¡ºåºç»™å‡ºï¼Œç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºé¦–é¡µï¼Œæœ€åä¸€ä¸ªå…ƒç´ ä¸ºå½“å‰é¡µé¢ã€‚
>
> **æ³¨æ„ï¼š** `getCurrentPages()`ä»…ç”¨äºå±•ç¤ºé¡µé¢æ ˆçš„æƒ…å†µï¼Œè¯·å‹¿ä¿®æ”¹é¡µé¢æ ˆï¼Œä»¥å…é€ æˆé¡µé¢çŠ¶æ€é”™è¯¯ã€‚

### (4) è·¯ç”±ä¼ å‚ä¸æ¥æ”¶

> è¯´æ˜ï¼šé¡µé¢ç”Ÿå‘½å‘¨æœŸçš„onLoad() ç›‘å¬é¡µé¢åŠ è½½ã€‚å…¶å‚æ•°ä¸ºä¸Šä¸ªé¡µé¢ä¼ é€’çš„æ•°æ®ï¼Œå¦‚

```js
// é¡µé¢è·³è½¬å¹¶ä¼ é€’å‚æ•°
uni.navigateTo({
    url: 'page/index/index?name=zheguo&message=hello'
})
```

**navigateTo(object)å‚æ•°è¯´æ˜**

| å‚æ•°                | ç±»å‹       | å¿…å¡« | é»˜è®¤å€¼    | è¯´æ˜                                                                                                                                       | å¹³å°å·®å¼‚è¯´æ˜ |
|:------------------|:---------|:---|:-------|:-----------------------------------------------------------------------------------------------------------------------------------------|:-------|
| url               | String   | æ˜¯  |        | éœ€è¦è·³è½¬çš„åº”ç”¨å†…é tabBar çš„é¡µé¢çš„è·¯å¾„ , è·¯å¾„åå¯ä»¥å¸¦å‚æ•°ã€‚å‚æ•°ä¸è·¯å¾„ä¹‹é—´ä½¿ç”¨?åˆ†éš”ï¼Œå‚æ•°é”®ä¸å‚æ•°å€¼ç”¨=ç›¸è¿ï¼Œä¸åŒå‚æ•°ç”¨&åˆ†éš”ï¼›å¦‚ 'path?key=value&key2=value2'ï¼Œpathä¸ºä¸‹ä¸€ä¸ªé¡µé¢çš„è·¯å¾„ï¼Œä¸‹ä¸€ä¸ªé¡µé¢çš„onLoadå‡½æ•°å¯å¾—åˆ°ä¼ é€’çš„å‚æ•° |        |
| animationType     | String   | å¦  | pop-in | çª—å£æ˜¾ç¤ºçš„åŠ¨ç”»æ•ˆæœï¼Œè¯¦è§ï¼š[çª—å£åŠ¨ç”»](https://zh.uniapp.dcloud.io/api/router.html#animation)                                                               | App    |
| animationDuration | Number   | å¦  | 300    | çª—å£åŠ¨ç”»æŒç»­æ—¶é—´ï¼Œå•ä½ä¸º ms                                                                                                                          | App    |
| events            | Object   | å¦  |        | é¡µé¢é—´é€šä¿¡æ¥å£ï¼Œç”¨äºç›‘å¬è¢«æ‰“å¼€é¡µé¢å‘é€åˆ°å½“å‰é¡µé¢çš„æ•°æ®ã€‚2.8.9+ å¼€å§‹æ”¯æŒã€‚                                                                                                 |        |
| success           | Function | å¦  |        | æ¥å£è°ƒç”¨æˆåŠŸçš„å›è°ƒå‡½æ•°                                                                                                                              |        |
| fail              | Function | å¦  |        | æ¥å£è°ƒç”¨å¤±è´¥çš„å›è°ƒå‡½æ•°                                                                                                                              |        |
| complete          | Function | å¦  |        | æ¥å£è°ƒç”¨ç»“æŸçš„å›è°ƒå‡½æ•°ï¼ˆè°ƒç”¨æˆåŠŸã€å¤±è´¥éƒ½ä¼šæ‰§è¡Œï¼‰                                                                                                                 |        |

```javascript
// åœ¨test.vueé¡µé¢æ¥å—å‚æ•°
export default {
    onLoad: function (option) { //optionä¸ºobjectç±»å‹ï¼Œä¼šåºåˆ—åŒ–ä¸Šä¸ªé¡µé¢ä¼ é€’çš„å‚æ•°
        console.log(option.id); //æ‰“å°å‡ºä¸Šä¸ªé¡µé¢ä¼ é€’çš„å‚æ•°ã€‚
        console.log(option.name); //æ‰“å°å‡ºä¸Šä¸ªé¡µé¢ä¼ é€’çš„å‚æ•°ã€‚
    }
}
```

> **æ³¨æ„**ï¼šurl æœ‰é•¿åº¦é™åˆ¶ï¼Œå¤ªé•¿çš„å­—ç¬¦ä¼ é€’å¤±è´¥ï¼Œå¹¶ä¸”ä¸è§„èŒƒçš„å­—ç¬¦æ ¼å¼ä¹Ÿå¯èƒ½å¯¼è‡´ä¼ é€’å¤±è´¥ï¼Œæ‰€ä»¥å¯¹äºå¤æ‚çš„å‚æ•°å»ºè®®ä½¿ç”¨
> encodeURL , decodeUPL è¿›è¡Œå¤„ç†åä¼ é€’ã€‚

### (5) å°ç¨‹åºè·¯ç”±åˆ†åŒ…é…ç½®

> å› ä¸ºå°ç¨‹åºæœ‰ä½“ç§¯å’ŒåŠ è½½èµ„æºé™åˆ¶ï¼Œå„å®¶å°ç¨‹åºå¹³å°æä¾›äº†åˆ†åŒ…æ–¹å¼ï¼Œä¼˜åŒ–å°ç¨‹åºçš„ä¸‹è½½å’Œå¯åŠ¨é€Ÿåº¦ã€‚æ‰€è°“çš„ä¸»åŒ…ï¼Œå³æ”¾ç½®é»˜è®¤å¯åŠ¨é¡µé¢åŠ
> Tabbar é¡µé¢ï¼Œè€Œåˆ†åŒ…æ˜¯æ ¹æ® pages.json çš„é…ç½®è¿›è¡Œåˆ†åŒ…çš„ã€‚
>
> åœ¨å°ç¨‹åºå¯åŠ¨æ—¶ï¼Œé»˜è®¤ä¼šä¸‹è½½ä¸»åŒ…å¹¶å¯åŠ¨ä¸»åŒ…å†…é¡µé¢ï¼Œå½“ç”¨æˆ·è¿›å…¥åˆ†åŒ…å†…æŸä¸ªé¡µé¢æ—¶ï¼Œä¼šæŠŠå¯¹åº”åˆ†åŒ…è‡ªåŠ¨ä¸‹è½½èµ·æ¥ï¼Œä¸‹è½½å®Œæˆåå†è¿›è¡Œå±•ç¤ºï¼Œæ­¤æ—¶ç»ˆç«¯é¡µé¢ä¼šæœ‰ç­‰å¾…æç¤ºã€‚

```
"subPackages": [{
		"root": "subpages",
		"pages": [{
			"path": "subpages/news/news",
			"style": {
				"navigationBarTitleText": "æ–°é—»ä¸­å¿ƒ",
				"navigationBarBackgroundColor": "#007aff",
				"navigationBarTextStyle": "black",
				"backgroundColor": "#007aff"
			}
		}],
	}],
	"preloadRule": {
		"pages/index": {
			"network": "all",
			"packages": ["activities"]
		}
	},
```

## äº”ï¼ŒUniapp å¸¸ç”¨åŸºç¡€ç»„ä»¶

> å®˜ç½‘åœ°å€ï¼š[](https://zh.uniapp.dcloud.io/component/view.html)

## å…­ï¼ŒUniapp å¸¸ç”¨api

> `uni-app`çš„ js API ç”±æ ‡å‡† ECMAScript çš„ js API å’Œ uni æ‰©å±• API è¿™ä¸¤éƒ¨åˆ†ç»„æˆã€‚
>
> æ ‡å‡† ECMAScript çš„ js ä»…æ˜¯æœ€åŸºç¡€çš„ jsã€‚æµè§ˆå™¨åŸºäºå®ƒæ‰©å±•äº† windowã€documentã€navigator ç­‰å¯¹è±¡ã€‚å°ç¨‹åºä¹ŸåŸºäºæ ‡å‡† js æ‰©å±•äº†å„ç§
> wx.xxã€my.xxã€swan.xx çš„ APIã€‚node ä¹Ÿæ‰©å±•äº† fs ç­‰æ¨¡å—ã€‚
>
> uni-app åŸºäº ECMAScript æ‰©å±•äº† uni å¯¹è±¡ï¼Œå¹¶ä¸” API å‘½åä¸å°ç¨‹åºä¿æŒå…¼å®¹
>
> `uni-app`çš„ js ä»£ç ï¼Œweb ç«¯è¿è¡Œäºæµè§ˆå™¨ä¸­ã€‚é web ç«¯ï¼ˆåŒ…å«å°ç¨‹åºå’Œ Appï¼‰ï¼ŒAndroid å¹³å°è¿è¡Œåœ¨ v8 å¼•æ“ä¸­ï¼ŒiOS å¹³å°è¿è¡Œåœ¨ iOS
> è‡ªå¸¦çš„ jscore å¼•æ“ä¸­ï¼Œéƒ½æ²¡æœ‰è¿è¡Œåœ¨æµè§ˆå™¨æˆ– webview é‡Œã€‚
>
> é web ç«¯ï¼Œè™½ç„¶ä¸æ”¯æŒ windowã€documentã€navigator ç­‰æµè§ˆå™¨çš„ js APIï¼Œä½†ä¹Ÿæ”¯æŒæ ‡å‡† ECMAScriptã€‚
>
> è¯·æ³¨æ„ä¸è¦æŠŠæµè§ˆå™¨é‡Œçš„ js ç­‰ä»·äºæ ‡å‡† jsã€‚
>
> æ‰€ä»¥ uni-app çš„éwebç«¯ï¼Œä¸€æ ·æ”¯æŒæ ‡å‡† jsï¼Œæ”¯æŒ ifã€for ç­‰è¯­æ³•ï¼Œæ”¯æŒå­—ç¬¦ä¸²ã€æ•°å­—ã€æ—¶é—´ã€å¸ƒå°”å€¼ã€æ•°ç»„ã€è‡ªå®šä¹‰å¯¹è±¡ç­‰å˜é‡ç±»å‹åŠå„ç§å¤„ç†æ–¹æ³•ã€‚ä»…ä»…æ˜¯ä¸æ”¯æŒ
> windowã€documentã€navigator ç­‰æµè§ˆå™¨ä¸“ç”¨å¯¹è±¡ã€‚

## ä¸ƒï¼ŒUniapp è‡ªå®šä¹‰ç»„ä»¶åŠé€šä¿¡

### (1) è‡ªå®šä¹‰ç»„ä»¶æ¦‚å¿µ

> ç»„ä»¶æ˜¯vue æŠ€æœ¯ä¸­éå¸¸é‡è¦çš„éƒ¨åˆ†ï¼Œç»„ä»¶ä½¿å¾—ä¸ ui ç›¸å…³çš„è½®å­å¯ä»¥æ–¹ä¾¿çš„åˆ¶é€ å’Œå…±äº«ï¼Œè¿›è€Œä½¿å¾—vueä½¿ç”¨è€…çš„å¼€å‘æ•ˆç‡å¤§å¹…ä¸Šå‡ï¼Œåœ¨é¡¹ç›®çš„
> component ç›®å½•ä¸‹å­˜æ”¾ç»„ä»¶ï¼Œuni-app åªæ”¯æŒå•æ–‡ä»¶ç»„ä»¶ï¼ˆ.vue ç»„ä»¶ï¼‰
>
> ç»„ä»¶å¯ä»¥ä½¿ç”¨ å…¨å±€æ³¨å†Œ å’Œ é¡µé¢å¼•å…¥ ä¸¤ç§æ–¹å¼è¿›è¡Œä½¿ç”¨ï¼Œä½¿ç”¨åˆ†ä¸ºä¸‰æ­¥ï¼š
>
> å¯¼å…¥ import xx from 'xxx'
>
> æ³¨å†ŒVue.use('xx',xx)    components:{ xx }
>
> ä½¿ç”¨<xx/>  æˆ–è€…  <xx></xx>

### (2) çˆ¶å­ç»„ä»¶é€šä¿¡

> çˆ¶ä¼ å­
>
> 1. çˆ¶ç»„ä»¶é€šè¿‡è‡ªå®šä¹‰å±æ€§ç®±å­ç»„ä»¶ä¼ é€’æ•°æ®ã€‚
> 2. å­ç»„ä»¶é€šè¿‡propsæ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’çš„æ•°æ®

> å­ä¼ çˆ¶
>
> 1. çˆ¶ç»„ä»¶é€šè¿‡è‡ªå®šä¹‰äº‹ä»¶æ ‡ç­¾ç®±å­ç»„ä»¶ä¼ é€’äº‹ä»¶
> 2. å­ç»„ä»¶é€šè¿‡è§¦å‘çˆ¶ç»„ä»¶å®šä¹‰äº‹ä»¶ä¿®æ”¹çˆ¶ç»„ä»¶æ•°æ®

```js
// å®šä¹‰å…¨å±€äº‹ä»¶ å…ˆåœ¨ç»„ä»¶å†…éƒ¨
onLoad()
{
    uni.$on('allConfig', data => {
        console.log("è¿™æ˜¯å®šä¹‰çš„ä¸€ä¸ªå…¨å±€äº‹ä»¶");
        this.name = data
    })
}

// åœ¨ä½ è¦è§¦å‘çš„ç»„ä»¶å†…éƒ¨
// è§¦å‘å…¨å±€äº‹ä»¶
uni.$emit('allConfig', 'æŠ˜æœ')
```

### (3) slot æ•°æ®åˆ†å‘ä¸ä½œç”¨åŸŸæ’æ§½

> 1. çˆ¶ç»„ä»¶é€šè¿‡è°ƒç”¨å­ç»„ä»¶å†…éƒ¨åµŒå¥— html å†…å®¹ä½œä¸º slot åˆ†å‘ç»™å­ç»„ä»¶ã€‚
> 2. å­ç»„ä»¶é€šè¿‡ slot æ ‡ç­¾ä¸Šæ·»åŠ å±æ€§ï¼Œå‘çˆ¶ç»„ä»¶é€šä¿¡æ•°æ®ï¼Œä½œç”¨åŸŸæ’æ§½ã€‚

## å…« , Uniapp  Vuexå…¨å±€çŠ¶æ€ç®¡ç†

1. æ¦‚å¿µ

> Vuex æ˜¯ä¸€ä¸ªä¸“ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚å®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚

2. åº”ç”¨åœºæ™¯

> Vueå¤šä¸ªç»„ä»¶éœ€è¦å…±äº«çŠ¶æ€å’Œæ•°æ®

3. å…³é”®è§„åˆ™

> - stateï¼Œå­˜å‚¨çŠ¶æ€æ•°æ®
> - getterï¼Œä»çŠ¶æ€æ•°æ®æ´¾ç”Ÿæ•°æ®ï¼Œç›¸å½“äº state çš„è®¡ç®—å±æ€§
> - mutationï¼Œå­˜å‚¨ç”¨äºåŒæ­¥æ›´æ–°çŠ¶æ€æ•°æ®çš„æ–¹æ³•ï¼Œé»˜è®¤ä¼ å…¥çš„å‚æ•°ä¸º state
> - actionsï¼Œå­˜å‚¨ç”¨äºå¼‚æ­¥æ›´æ”¹çŠ¶æ€æ•°æ®ï¼Œä½†ä¸æ˜¯ç›´æ¥æ›´æ”¹ï¼Œè€Œæ˜¯é€šè¿‡è§¦å‘ mutation æ–¹æ³•å®ç°ï¼Œé»˜è®¤å‚æ•°ä¸º context
> - moduleï¼ŒVuex æ¨¡å—åŒ–

4. äº¤äº’å…³ç³»

![](../../../public/img/2.png)

### é—®é¢˜

åœ¨è¿™é‡Œæˆ‘å‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œæ‰¾äº†åŠå¤©ğŸ˜µğŸ˜µ

![](../../../public/img/3.png)

è§£å†³åŠæ³•

```js
// åœ¨storeæ–‡ä»¶å¤¹ä¸‹é¢index.jsæ–‡ä»¶
import Vuex from 'vuex'

const store = new Vuex.Store({
    state: {
        userName: 'æœªç™»å½•ç”¨æˆ·'
    },
    mutations: {
        MLOGIN: (state, userName) => {
            state.userName = userName
        },
        MLOGOUT: (state, userName) => {
            state.userName = 'é€€å‡ºçŠ¶æ€'
        }
    },
    actions: {
        login: (context, userName) => {
            context.commit('MLOGIN', userName)
        },
        logout: (context) => {
            context.commit('MLOGOUT')
        }
    }
})

export default store

// åœ¨main.js é‡Œé¢
import App from './App'

// #ifndef VUE3
import Vue from 'vue'
import './uni.promisify.adaptor'

Vue.config.productionTip = false
App.mpType = 'app'
const app = new Vue({
    ...App
})
app.$mount()
// #endif

// ä¸Šé¢çš„ä¸æ”¹ æŠŠstoreåŠ åœ¨ä¸‹é¢
// #ifdef VUE3
import {createSSRApp} from 'vue'
import store from '@/store/index.js'

export function createApp() {
    const app = createSSRApp(App)
    app.use(store)
    return {
        app
    }
}

// #endif
```

5. ä½¿ç”¨æ–¹æ³•

```vue

<template>
  <view>
    <text>é€šè®¯å½•</text>

    <view>
      {{userName}}
    </view>

    <view>
      <button @click="login('èœ¡ç¬”å°æ–°')">ç™»å½•</button>
      <button @click="logout">æ³¨å†Œ</button>
    </view>
  </view>
</template>

<script>
  // åœ¨ç»„ä»¶çš„scriptæ ‡ç­¾ä¸­å¯¼å…¥
  import {
    mapState,
    mapGetters,
    mapMutations,
    mapActions
  } from 'vuex';

  export default {
    data() {
      return {}
    },
    computed: {
      ...mapState({
        userName: state => state.userName,
        // å…¶ä»–éœ€è¦çš„çŠ¶æ€
      })
    },
    methods: {
      ...mapActions(['login', 'logout'])
    },
    mounted() {
    }
  }
</script>

<style>

</style>
```

## ä¹ï¼Œè¿è¡Œç¯å¢ƒå’Œè·¨ç«¯å…¼å®¹

### (1) å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒ

> uni-app å¯é€šè¿‡ process.env.NODE_ENV åˆ¤æ–­å½“å‰ç¯å¢ƒæ˜¯å¼€å‘ç¯å¢ƒè¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒï¼Œä¸€èˆ¬ç”¨äºè¿æ¥æµ‹è¯•æœåŠ¡å™¨æˆ–ç”Ÿäº§æœåŠ¡å™¨çš„åŠ¨æ€åˆ‡æ¢ã€‚
>
> åœ¨HBuilderX ä¸­ï¼Œç‚¹å‡» è¿è¡Œ ç¼–è¯‘å‡ºæ¥çš„ä»£ç æ˜¯å¼€å‘ç¯å¢ƒï¼Œç‚¹å‡» å‘è¡Œ ç¼–è¯‘å‡ºæ¥çš„æ˜¯ç”Ÿäº§ç¯å¢ƒã€‚

### (2) åˆ¤æ–­å¹³å°

> å¹³å°åˆ¤æ–­æœ‰ 2 ç§åœºæ™¯ï¼Œä¸€ç§æ˜¯åœ¨ç¼–è¯‘æœŸåˆ¤æ–­ï¼Œä¸€ç§æ˜¯åœ¨è¿è¡ŒæœŸåˆ¤æ–­ã€‚

> ç¼–è¯‘æœŸåˆ¤æ–­
>
ç¼–è¯‘æœŸåˆ¤æ–­ï¼Œå³æ¡ä»¶ç¼–è¯‘ï¼Œä¸åŒå¹³å°åœ¨ç¼–è¯‘å‡ºåŒ…åå·²ç»æ˜¯ä¸åŒçš„ä»£ç ã€‚è¯¦è§ï¼š[æ¡ä»¶ç¼–è¯‘](https://zh.uniapp.dcloud.io/tutorial/platform.html)

```javascript
// #ifdef H5
alert('åªæœ‰h5å¹³å°æ‰æœ‰alertæ–¹æ³•');
// #endif
```

å¦‚ä¸Šä»£ç åªä¼šç¼–è¯‘åˆ° H5 çš„å‘è¡ŒåŒ…é‡Œï¼Œå…¶ä»–å¹³å°çš„åŒ…ä¸ä¼šåŒ…å«å¦‚ä¸Šä»£ç ã€‚

> è¿è¡ŒæœŸåˆ¤æ–­ è¿è¡ŒæœŸåˆ¤æ–­æ˜¯æŒ‡ä»£ç å·²ç»æ‰“å…¥åŒ…ä¸­ï¼Œä»ç„¶éœ€è¦åœ¨è¿è¡ŒæœŸåˆ¤æ–­å¹³å°ï¼Œæ­¤æ—¶å¯ä½¿ç”¨ `uni.getSystemInfoSync().platform`
> åˆ¤æ–­å®¢æˆ·ç«¯ç¯å¢ƒæ˜¯ Androidã€iOS è¿˜æ˜¯å°ç¨‹åºå¼€å‘å·¥å…·ï¼ˆåœ¨ç™¾åº¦å°ç¨‹åºå¼€å‘å·¥å…·ã€å¾®ä¿¡å°ç¨‹åºå¼€å‘å·¥å…·ã€æ”¯ä»˜å®å°ç¨‹åºå¼€å‘å·¥å…·ä¸­ä½¿ç”¨
`uni.getSystemInfoSync().platform` è¿”å›å€¼å‡ä¸º devtoolsï¼‰ã€‚

```javascript
switch (uni.getSystemInfoSync().platform) {
    case 'android':
        console.log('è¿è¡ŒAndroidä¸Š');
        break;
    case 'ios':
        console.log('è¿è¡ŒiOSä¸Š');
        break;
    default:
        console.log('è¿è¡Œåœ¨å¼€å‘è€…å·¥å…·ä¸Š');
        break;
}
```

å¦‚æœ‰å¿…è¦ï¼Œä¹Ÿå¯ä»¥åœ¨æ¡ä»¶ç¼–è¯‘é‡Œè‡ªå·±å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œèµ‹ä¸åŒå€¼ã€‚åœ¨åç»­è¿è¡Œä»£ç ä¸­åŠ¨æ€åˆ¤æ–­ç¯å¢ƒã€‚

### (3) è·¨ç«¯å…¼å®¹

> uni-app å·²å°†å¸¸ç”¨çš„ç»„ä»¶ã€APIå°è£…åˆ°æ¡†æ¶ä¸­ï¼Œå¼€å‘è€…æŒ‰ç…§ uni-app è§„èŒƒå¼€å‘å³å¯ä¿è¯å¤šå¹³å°å…¼å®¹ï¼Œå¤§éƒ¨åˆ†ä¸šåŠ¡å‡å¯ç›´æ¥æ»¡è¶³ã€‚
>
> ä½†æ¯ä¸ªå¹³å°æœ‰è‡ªå·±çš„ä¸€äº›ç‰¹æ€§ï¼Œå› æ­¤ä¼šå­˜åœ¨ä¸€äº›æ— æ³•è·¨å¹³å°çš„æƒ…å†µã€‚
>
> - å¤§é‡å†™ if elseï¼Œä¼šé€ æˆä»£ç æ‰§è¡Œæ€§èƒ½ä½ä¸‹å’Œç®¡ç†æ··ä¹±ã€‚
> - ç¼–è¯‘åˆ°ä¸åŒçš„å·¥ç¨‹åäºŒæ¬¡ä¿®æ”¹ï¼Œä¼šè®©åç»­å‡çº§å˜çš„å¾ˆéº»çƒ¦ã€‚
> - ä¸ºæ¯ä¸ªå¹³å°é‡å†™ï¼Œæ˜æ˜ä¸»ä¸šåŠ¡é€»è¾‘åˆä¸€æ ·
>
> åœ¨ C è¯­è¨€ä¸­ï¼Œé€šè¿‡ `#ifdef`ã€`#ifndef` çš„æ–¹å¼ï¼Œä¸º Windowsã€Mac ç­‰ä¸åŒ OS ç¼–è¯‘ä¸åŒçš„ä»£ç ã€‚
>
> `uni-app` å›¢é˜Ÿå‚è€ƒè¿™ä¸ªæ€è·¯ï¼Œä¸º `uni-app` æä¾›äº†æ¡ä»¶ç¼–è¯‘æ‰‹æ®µï¼Œåœ¨ä¸€ä¸ªå·¥ç¨‹é‡Œä¼˜é›…çš„å®Œæˆäº†å¹³å°ä¸ªæ€§åŒ–å®ç°ã€‚

> æ¡ä»¶ç¼–è¯‘æ˜¯ç”¨ç‰¹æ®Šçš„æ³¨é‡Šä½œä¸ºæ ‡è®°ï¼Œåœ¨ç¼–è¯‘æ—¶æ ¹æ®è¿™äº›ç‰¹æ®Šçš„æ³¨é‡Šï¼Œå°†æ³¨é‡Šé‡Œé¢çš„ä»£ç ç¼–è¯‘åˆ°ä¸åŒå¹³å°ã€‚
>
> å†™æ³•ï¼š
>
> ä»¥ `#ifdef` æˆ– `#ifndef` åŠ  `%PLATFORM%` å¼€å¤´ï¼Œä»¥ `#endif` ç»“å°¾ã€‚
>
> - `#ifdef`ï¼šif defined ä»…åœ¨æŸå¹³å°å­˜åœ¨
>
> - `#ifndef`ï¼šif not defined é™¤äº†æŸå¹³å°å‡å­˜åœ¨
>
> - `%PLATFORM%`ï¼šå¹³å°åç§°
>



**`%PLATFORM%`** å¯å–å€¼å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š

| APP                     | App                                                                         |                  |
|-------------------------|-----------------------------------------------------------------------------|------------------|
| APP-PLUS                | uni-app jså¼•æ“ç‰ˆç¼–è¯‘ä¸ºAppæ—¶                                                        |                  |
| APP-PLUS-NVUEæˆ–APP-NVUE  | App nvue é¡µé¢                                                                 |                  |
| APP-ANDROID             | App Android å¹³å° [è¯¦æƒ…](https://zh.uniapp.dcloud.io/tutorial/platform.html#uts) |                  |
| APP-IOS                 | App iOS å¹³å° [è¯¦æƒ…](https://zh.uniapp.dcloud.io/tutorial/platform.html#uts)     |                  |
| APP-HARMONY             | App HarmonyOS Next å¹³å°                                                       |                  |
| H5                      | H5ï¼ˆæ¨èä½¿ç”¨ `WEB`ï¼‰                                                              |                  |
| WEB                     | webï¼ˆåŒ`H5`ï¼‰                                                                  | HBuilderX 3.6.3+ |
| MP-WEIXIN               | å¾®ä¿¡å°ç¨‹åº                                                                       |                  |
| MP-ALIPAY               | æ”¯ä»˜å®å°ç¨‹åº                                                                      |                  |
| MP-BAIDU                | ç™¾åº¦å°ç¨‹åº                                                                       |                  |
| MP-TOUTIAO              | æŠ–éŸ³å°ç¨‹åº                                                                       |                  |
| MP-LARK                 | é£ä¹¦å°ç¨‹åº                                                                       |                  |
| MP-QQ                   | QQå°ç¨‹åº                                                                       |                  |
| MP-KUAISHOU             | å¿«æ‰‹å°ç¨‹åº                                                                       |                  |
| MP-JD                   | äº¬ä¸œå°ç¨‹åº                                                                       |                  |
| MP-360                  | 360å°ç¨‹åº                                                                      |                  |
| MP                      | å¾®ä¿¡å°ç¨‹åº/æ”¯ä»˜å®å°ç¨‹åº/ç™¾åº¦å°ç¨‹åº/æŠ–éŸ³å°ç¨‹åº/é£ä¹¦å°ç¨‹åº/QQå°ç¨‹åº/360å°ç¨‹åº                                 |                  |
| QUICKAPP-WEBVIEW        | å¿«åº”ç”¨é€šç”¨(åŒ…å«è”ç›Ÿã€åä¸º)                                                              |                  |
| QUICKAPP-WEBVIEW-UNION  | å¿«åº”ç”¨è”ç›Ÿ                                                                       |                  |
| QUICKAPP-WEBVIEW-HUAWEI | å¿«åº”ç”¨åä¸º                                                                       |                  |

## Uniapp ç¤¾åŒºè®ºå›é¡¹ç›®å¤šç«¯å®æˆ˜

